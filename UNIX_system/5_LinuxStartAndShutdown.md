### <span style="color:skyblue">주요 용어</span>

```
* 부팅
  - 컴퓨터를 동작시키기 위해 운영체제 커널을 메모리에 올려 하드웨어를 인식하고 파일 시스템을 마운트하며 서비스 프로그램을 실행시키는 과정

* init 프로세스
  - 리눅스 부팅 과정에서 마지막 과정을 담당하는 프로세스
  - PID가 1이며 모든 사용자 프로세스의 최상위 프로세스

* 런레벨(runlevel)
  - 리눅스 운영체체가 시작할 때의 초기 상태를 의미
  - 런레벨에 따라 리눅스 서버가 제공하는 서비스의 종류와 양이 결정

* GNOME
  - 리눅스나 유닉스 계열의 운영체제에서 그래픽 인터페이스를 제공하는 데스크톱 환경
  - Red Hat사의 지원하에 GNOME 프로젝트에서 개발한 오픈소스 소프트웨어
```

### 🔸 리눅스의 일반적인 부팅 과정

1. 전원이 들어오면 ROM BIOS의 부트스트랩 프로그램이 실행
2. 부트스트랩 프로그램은 디스크의 Master Boot Record(MBR)에 있는 부트블록 프로그램을 실행
3. BMR의 부트블록 프로그램이 운영체제의 파티션에 있는 부트 로더를 실행
4. 부트 로더는 리눅스 커널 이미지를 찾아 메모리에 적재
5. 메모리에 적재된 커널 이미지의 압축이 풀리고 커널이 실행
6. 커널이 커널 내부의 기능과 각종 장치를 점검하고 파일 시스템을 마운트하며 가장 먼저 생성되는 프로세스인 init을 실행하고 init에 제어권을 넘김
7. init은 /etc/inittab 파일을 읽고 런레벨에 따라 /etc/rc.d 디렉터리에 있는 작업을 수행

### 🔸 MBR의 정보

- 부트블록 프로그램 : 보조기억장치에 적재된 프로그램 중 가장 먼저 실행
- 파티션 테이블 : 파티션의 시작과 끝 주소, 부팅 가능한 파티션 여부, 파티션 타입 등이 기록되어 있음

### 🔸 부트 로더의 종류

- LILO(Linux Loader) : 전통적인 리눅스 부트 로더
- GRUB(Grand Unified Bootloader) : 다양한 기능을 제공하는 편리한 부트 로더로 현재 가장 널리 사용되고 있음

### 🔸 커널 부팅 과정

1. 압축된 커널 이미지가 메모리에 로드된 후 압축이 풀리고 메모리에서 커널이 실행됨
2. 커널은 커널의 자체 기능을 점검하고 설치된 하드웨어를 점검함
3. 루트 파티션을 읽기 전용으로 마운트하여 디스크 검사를 하고 검사 후 루트 파티션을 쓰기 가능 모드로 다시 마운트 함
4. 커널이 /sbin/init을 실행하고 커널은 init로 제어권을 넘김
5. init 프로세스는 /etc/init/ 디렉터리에 있는 job 설정 파일(.conf)을 읽음

- 이벤트 기반으로 처리됨

6. /etc/inittab 파일에서 초기 런레벨을 읽음
7. 런레벨에 따라 실행되는 내용이 달라짐
8. init는 각종 장치를 활성화

- init 프로세스는 런레벨에 따라 /etc/rc.d 디렉터리에 있는 작업을 수행
- 가장 마지막에 실행되는 스크립트는 /etc/rc.d/rc.local로 여기에 관리자가 원하는 특별한 초기화 작업을 추가할 수 있음
- 런레벨이 5인 경우 최종적으로 X 윈도우 로그인 화면이 나타남

### 🔸 업스타트 init 데몬

- 초기화 과정은 전통적 init 데몬, 업스타트 init 데몬 그리고 최근의 systemd 데몬을 사용하는 경우로 나누어진다.

### 🔸 부모 프로세스와 자식 프로세스

- 프로세스는 커널의 관리하에 있으며 실행 중인 프로그램
- 프로세스 A가 프로세스 B를 실행시켰을 때 A를 부모 프로세스라 하고 B를 자식 프로세스라고 함
- PID는 프로세스 고유의 번호이고 PPID는 부모 프로세스의 고유 번호임

### 🔸 init 프로세스와 관련된 스크립트 파일

- /etc/inittab : init의 설정 파일로 초기 런레벨이 정의된 파일
- /etc/init/rcS.conf : 부팅 시 한번 실행되며 시스템 초기화와 관련이 있는 내용이 설정되어 있음
- /etc/rc.d/rc.sysinit : 제일 먼저 실생되는 스크립트 파일
- /etc/init/rc.conf : 부팅되거나 런레벨이 바뀔 때 서비스를 시작시키거나 중단시키기 위해 스크립트를 실행시키는 파일
- /etc/rc.d/rc.local : 런레벨 2, 3, 5에서 제일 마지막에 실행되는 파일
- /etc/rc.d/init.d : 데몬을 실행시키기 위한 스크립트들이 존재하는 디렉터리
- /etc/rc.d/rc[0-6].d : 지정된 런레벨에서 서비스를 실행 또는 종료시키기 위한 파일(심벌릭 링크)들이 존재하는 디렉터리

### 🔸 init 프로세스와 런레벨

- init는 /etc/inittab 설정 파일을 읽음
  - 보통 런레벨은 5가 기본값으로 설정되어 있음
- 먼저 /etc/init/rcS.conf에서 시스템 초기화를 위해 /etc/rc.d/rc.sysinit 스크립트를 실행
- 런레벨의 의미
  - 0 : 시스템 종료
  - 1 : 단일 사용자 모드
  - 2 : NFS를 지원하지 않는 다중 사용자 모드
  - 3 : 모든 네트워크 기능을 지원하는 다중 사용자 모드
  - 5 : X 윈도우를 사용하는 로그인 모드
  - 6 : 재부팅

### 🔸 시스템 접속 및 사용

- 시스템 부팅이 끝나면 기본적으로 X 윈도우 로그인 모드가 실행되고 사용자 이름과 암호를 입력하면 GNOME 데스크톱이 실행
- 셸 명령을 실행할 터미널 프로그램은 `프로그램 > 보조 프로그램 > 터미널`로 실행
- 터미널의 셸 프롬프트 모양은 루트 권한일 때는 #, 일반 사용자 권한일 때는 $로 구분
- root 계정은 시스템 관리자에게 부여되는 모든 권한을 가짐
  - 따라서 시스템 설정 시에만 root 계정을 사용하는 것이 바람직함

### 🔸 시스템 접속 종료

- 데스크톱 환경에서는 `시스템 > 로그아웃`을 실행
- 로그인 셸에서는 `logout` 또는 모든 셸에서 `exit` 명령을 실행할 수 있음

### 🔸 리눅스 시스템의 종료

- X 윈도우 환경에서는 `시스템 > 끄기`를 실행
- 셸 명령에서는 init 0 또는 shutdown 명령을 실행

### 🔸 리눅스 명령의 특징

- 대소문자가 구분되며 세미콜론으로 명령어를 구분하여 여러 명령을 한 줄에 실행 가능
- 명령을 실행할 때 파일 사용권한을 검사하는데 root 외의 사용자는 권한이 있는 파일(디렉터리)에만 접근 가능
- 파일을 실행하기 위해서는 실행권한이 있어야 함
- 내부 명령과 외부 명령(실행 파일이 존재)으로 분류되며 대부분의 명령이 파일로 존재하는 외부 명령임
- 실행 파일을 구별하기 위한 확장자는 따로 존재하지 않음
- PATH 환경 변수에 명령어의 경로가 설정되어 있으면 명령어 이름만으로 실행시킬 수 있으며 그렇지 않은 경우 명령 실행 파일의 경로를 명시해야 됨
- 일반적으로 명령어는 옵션과 인수를 가짐
- 일반적인 형식은 `coomand options arguments`임

### 🔸 종료 명령

- `shutdown [-krhfc][-t sec] time [경고메시지]`
- 옵션
  - -t sec : 프로세스에 경고 보냄과 kill 시그널 사이 초 단위 간격
  - -k : 사용자에게 경고 메시지만 전달
  - -r : 시스템 종료 후에 재부팅
  - -h : shutdown 후에 시스템 정지
  - -f : 재부팅할 때 fsck(file system check)를 하지 않음
  - -c : shutdown 명령어 취소
  - time : +m(m분 후) 또는 hh:mm(지정 시각)에 시스템 종료

### 🔸 시스템 종료 과정

1. 사용자들에게 시스템 종료 메시지를 보내고 로그인을 제한함
2. 지정된 시간 내 종료되지 않은 프로세스를 강제 종료
3. 지정된 시간 내 로그아웃하지 않은 사용자를 강제 로그아웃시킴
4. 메모리의 데이터를 디스크에 저장
5. 시스템 종료와 관련된 정보를 시스템 로그 파일에 기록
6. 마운트되어 있는 디바이스들을 마운트 해제
7. 시스템을 종료
