### <span style="color:skyblue">주요 용어</span>

```
* 내부 명령과 외부 명령
  - 내부 명령 : 셸 자체에서 처리되는 내장 명령.
  - 대부분의 유틸리티는 외부 명령으로 실행 파일이 따로 존재하고 셸 프로세스에 의해 새로운 프로세스가 만들어져 처리된다.

* 환경 변수
  - 보통의 셸 변수는 현재 셸에서만 유효한 지역 변수이나 export 명령을 사용하면 서브 셸에서도 계속 유효한 전역 변수(환경 변수)로 만들 수 있다.

* 파이프
  - 앞 명령의 출력을 다음 명령의 입력으로 연결하는 기능이다.

* 명령 치환
  - 명령 행의 일부로 $(command) 또는  `command`형태를 포함하는 경우 지정된 부분의 명령을 먼저 처리하는 것을 뜻함
```

### 🔸 셸(shell)

- 셸은 명령어를 해석하고 관리하는 프로그램
- 과거에는 키보드를 이용하여 명령러를 타이핑하는 방법만 가능했음
- 셸은 커널과 사용자 간의 가교 역활
- 리눅스 셸은 강력한 기능을 제공
- 셸은 명령어 해석기이면서 스크립트 언어이기도 함

### 🔸 셸의 종류

- Bourne 셸
  - Bell 연구소의 스티븐 본이 개발
  - 많은 셸 스크립트가 Bourne 셸을 기반으로 함
- C 셸
  - 스크립트 형식이 C 언어 구문과 유사
  - BSD 계열의 유닉스 사용자가 많이 사용
- TC 셸
  - C 셸을 확장 개선한 버전
  - '명령 행 완성'과 '명령 행 편집' 기능을 추가
  - /bin/tcsh
- Korn 셸
  - Bourne 셸을 확장하고 C 셸의 많은 기능을 추가함
  - System V 계열 유닉스 사용자들에게 인긴가 많았음
- Bourne Again 셸
  - Bourne 셸을 토대로 개발
  - C 셸과 Korn 셸의 유용한 기능을 가져와 통일
  - 많은 리눅스 배포판에세 기본 셸로 사용
  - /bin/bash

### 🔸 기본 셸 선택하기

- /etc/pass 파일에서 사용자 계정 정보의 마지막 항목에 기본 셸이 기록됨
- bash 셸의 실행 프로그램은 /bin/bash
- chsh -s /bin/tcsh와 같이 수행하면 기본 셸을 TC 셸로 변경할 수 있음

### 🔸 셸을 시작시키는 명령과 종료하는 명령

- 로그인을 하거나 터미널 창을 띄우면 셸이 시작
- 셸 프롬프트에서 특정 셸 프로그램을 실행하면 해당 셸을 시작시킬 수 있음
  - /bin/tcsh을 실행하면 TC 셸이 시작됨
    - 이것은 원래 셸에서 '서브 셸'을 시작시키는 것
  - 서브 셸을 종료시키려면 exit 명령을 수행해야 하며, 이때 원래 셸로 돌아감

### 🔸 셸 명령의 형식

```
> command options arguments
```

- 명령어(command)에 따라 옵션이나 인수가 필수적일 수도 선택적일 수도 있음
- 어떤 옵션을 사용하는냐에 따라 명령의 의미나 출력 형태가 달라짐
- 명령어의 인수는 명령의 수행 대상을 의미함

### 🔸 옵션의 형태

- 짧은 옵션
  - 1개의 문자를 대시(-) 문자 뒤에 붙어 -a와 같이 사용
  - '유닉스 스타일' 옵션이라고 함
  - 여러 옵션을 사용할 때는 여러 옵션을 개별적으로 나열할 수도 있고 대시(-) 뒤에 모두 붙여 사용할 수도 있음
  - 예를 들어 ls -lat와 ls -l -a -t는 같은 명령임
- 긴 옵션
  - 이중대시(--) 뒤에 단어를 붙여 --help와 같이 사용
  - 'GNU 스타일' 옵션이라고 함
    - ls --help or ls --all --sort=time
  - 옵션을 지정할 때 대시(-)를 사용하지 않는 'BSD 스타일' 옵션도 있음
    - ps a

### 🔸 인수

- 명령어의 인수는 명령어의 수행 대상을 의미
  - 파일 이름, 디렉터리, 사용자 계정, 디바이스 등이 인수로 사용
    - cat /etc/passwd에서 /etc/passwd는 cat 명령에서 인수에 해당
- 옵션에도 인수가 필요할 수 있음
  - 짧은 옵션은 공백 다음에 인수를 위치시킴
  - 긴 옵션은 공백 없이 바로 등호(=)와 인수를 붙여서 지정함
    - chsh -s /bin/tcsh에서 /bin/tcsh는 옵션 -s의 인수
    - ls -l --sort=time에서 time은 옵션 --sort의 인수에 해당

### 🔸 셸 명령의 실행과 PATH 환경 변수

- 셸 명령을 수행하기 위해서는 실행 프로그램이 필요
- 실행 프로그램은 셸의 환경 변수 중 PATH 변수에 설정되어 있는 경로 중에 있어야 함
- PATH 변수의 값을 확인하기 위해 `echo $PATH`를 실행할 수 있음

### 🔸 셸 명령의 종류

- 에일리어스
  - alias 명령을 사용하여 특정 명령을 옵션과 함께 짧은 별칭으로 정의해 둔 것
- 셸 예약어
  - 셸 스크립트 작성 시 사용되는 do, while, case, else 등
- 함수
  - 셸에서 수행될 수 있는 일련의 명령을 함수로 정의한 것
- 내장 명령
  - 셸 내부에 만들어져 있는 명령
  - cd, echo, pwd 등
  - main builtin 또는 help builtin-command를 사용하여 사용법을 확인할 수 있음
- 일반 명령(또는 외부 명령)
  - 파일 시스템에 실행 파일로 존재하는 명령
  - 실행 파일이 PATH 환경 변수에 포함된 경로에 있어야 파일의 이름만 입력하여 실행할 수 있음

### 🔸 alias 명령

- 명령의 별칭을 만드는 것
- 자주 사용되는 명령의 빠르고 효율적인 단축 명령을 만들기 위한 것
  - alias rm='rm -i'를 수행
  - alias la='la -A'와 같이 수행
- 에일리어스 설정이 되어 있는 rm 명령을 해제하려면 unalias rm을 수행하면 됨
- 에일리어스 설정을 유지하려면 셸의 환경 설정 파일에 기록이 필요
  - ~/.bashrc에 기록하는 것이 보통

### 🔸 type 명령

- 특정 명령을 어떻게 해석하는지 알기 위해 type 명령을 사용
- type command와 같이 사용하며 명령의 종류를 알 수 있음
- 일반 명령의 경우 실행 파일의 위치를 보여줌
- 여러 유형으로 명령이 존재하는 경우 -a 옵션을 사용하면 모든 사항을 확인할 수 있음

### 🔸 which 명령

- 셸 명령을 인수로 지정하고 이것의 실제 실행 프로그램을 알아내기 위한 명령

### 🔸 whereis 명령

- which 명령과 유사하나 소스의 매뉴얼 페이지가 존재하는 경우 해당 파일도 찾아 출력

### 🔸 man 명령

- 매뉴얼 페이지를 볼 수 있으며 각종 프로그램의 사용법을 자세히 확인할 수 있음
- 자주 사용되는 형식은 `man [section] command`
- 매뉴얼 페이지는 주제에 따라 섹션으로 구분
  - 특정 섹션에 존재하는 매뉴얼 페이지를 보려면 섹션 번호를 인수로 제공해야 함
- 섹션의 분류
  ```
  1 : 사용자 명령
  2 : 커널이 제공하는 시스템 호출
  3 : C 라이브러리 함수
  4 : 디바이스 드라이버
  5 : 시스템 설정 파일의 형식
  6 : 게임
  7 : 파일 포맷과 인코딩
  8 : 시스템 관리 명령
  ```

### 🔸 명령 히스토리와 명령 행 불러오기

- 이전에 수행했던 명령의 목록을 의미
- 셸에서 history 명령을 실행하면 이전에 입력했던 '명령 행'의 목록을 볼 수 있음
- `!!`는 직전 명령을 의미
- 셸에서 `!number`를 사용하여 과거의 명령을 실행
- `⬆️`를 누르면 '명령 히스토리' 목록에서 최근 명령을 불러오며 누를 때마다 그 직전 명령을 부름
- `⬇️`를 누르면 반대로 직후 명령을 불러옴
- `!string`은 지정된 문자열을 포함하는 가장 최근의 명령을 의미

### 🔸 명령 행 완성 기능

- 셸 명령을 입력할 때 처음 몇 자만을 타이핑한 후 탭키를 누름

### 🔸 특수 문자

- 백슬래시(`\`)
  - 특수 문자 앞에 붙어 특수 문자의 기능을 제거
  - 명령 행을 연장할 때도 사용
- 인용부호
  - 빈칸을 포함하는 문자열을 1개의 인수로 사용할 때 인용부호를 사용해야 함
  - 작은따옴표(' ')를 사용하면 따옴표 안에 있는 모든 특수 문자의 의미를 제거
  - 큰따옴표(" ")는 작은따옴표와 유사하나 예의적으로 달러($), 역따옴표(``), 백슬래시 문자를 해석하여 확장
  - 역따옴표(``)는 '명령 치환' 기능을 수행
- 세미콜론(;)
  - 여러 명령을 순서대로 실행할 때 구분을 위해 사용

### 🔸 파이프

- 앞 명령의 출력을 다음 명령의 입력으로 연결시키는 기능
- 파이프(|) 문자를 사용함
  - cat /etc/passwd | sort는 화면으로 나가는 출력을 sort 명령이 받아서 정렬한 후 화면에 출력함

### 🔸 리다이렉션

- 왼쪽 화살괄호(<)는 표준입력을 지정된 파일로 리다이렉션하는 기능
  - sort < /etc/passwd는 키보드 입력 대신에 지정된 파일로부터 입력을 받아 정렬하여 출력함
- 오른쪽 화살괄호(>)는 표준출력(화면)을 지정된 파일로 리다이렉션하는 기능
  - grep typedef /usr/include/\* > typedef.out는 grep 명령에서 나오는 표준출력을 화면으로 보내지 않고 지정된 파일에 기록됨
- 사용 예
  - command > file는 표준출력을 지정된 파일로 보냄
  - command 2 > file는 표준오류 출력을 지정된 파일로 보냄
  - command > file 2 > &1는 표준출력과 표준오류 출력을 지정된 파일로 보냄

### 🔸 명령 치환

- $(command) 또는 'command' 형태
- 명령어를 수행하기 전에 위와 같은 명령을 셸이 먼저 처리
  - ls -l $(which passwd)를 수행하는 것은 ls -l /usr/bin/passwd를 수행하는 것

### 🔸 date 명령

- 서버의 날짜와 시간을 확인하거나 설정함. 설정 기능은 root만 실행 가능

### 🔸 who 명령

- 현재 시스템에 접속해 있는 사용자들을 조회
- 사용자명, 터미널 정보, 접속시간, 로그인 시간 등을 조사

### 🔸 cal 명령

- 달력을 출력하는 명령

### 🔸 man 명령

- 리눅스 명령어들의 이름, 개요, 옵션, 환경과 매개 변수 등을 자세히 보여줌

### 🔸 수식의 확장

- `$[expression]` 또는 `$(expression)`의 형태
- 명령어를 수행하기 전에 셸은 위와 같은 수식을 먼저 계산

### 🔸 변수의 확장

- $변수는 변수의 값을 추출하여 확장

### 🔸 셸 변수

- 셸은 변수를 사용하여 정보를 저장할 수 있음
- 일반 변수는 현재 셸에서만 유효한 지역 변수임
- 환경 변수는 현재 셰릐 서브 셸에서도 계속 유효한 전역 변수
- 지역 변수를 환경 변수로 만들려면 `export variable` 명령을 사용
- 환경 변수의 값을 확인하려면 `printenv variable` 또는 `echo $variable`을 수행
- HOME, PS1, PATH, USER 등은 자주 사용되는 자라 알려진 환경 변수임

### 🔸 로그인과 환경 설정 파일

- ~/.bash_profile은 로그인 셸이 시작될 때 수행되는 설정 파일
  - 환경 변수를 설정할 수 있으며 보통 내부에서 ~/.bashrc를 실행
- ~/.bashrc는 로그인 후에 셸(비로그인 셸)이 시작될 때 수행되는 설정 파일
  - 보통 내부에서 /etc/bashrc를 수행하며 개별 사용자를 위한 에일리어스 또는 함수를 정의
